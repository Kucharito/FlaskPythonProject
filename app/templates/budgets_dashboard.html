{% extends "base.html" %}
{% block title %}Budgets{% endblock %}
{% block content %}

<h2 class="text-2xl font-semibold mb-4">Your Budgets</h2>

<!-- Form -->
<div class="max-w-lg mx-auto bg-white shadow-md rounded-lg p-6 mb-10">
    <h3 class="text-lg font-semibold mb-3">Add New Budget</h3>
    <form method="POST">
        {{ form.hidden_tag() }}

        <div class="mb-4">
            {{ form.category.label(class="block font-medium mb-1") }}
            {{ form.category(class="border border-gray-300 rounded w-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500") }}
        </div>

        <div class="mb-4">
            {{ form.limit.label(class="block font-medium mb-1") }}
            {{ form.limit(class="border border-gray-300 rounded w-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500") }}
        </div>

        {{ form.submit(class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded") }}
    </form>
</div>

<!-- List of budgets -->
<table class="min-w-full bg-white rounded-lg overflow-hidden shadow-md">
    <thead class="bg-gray-200 text-gray-700 uppercase text-sm">
        <tr>
            <th class="py-3 px-6 text-left">Category</th>
            <th class="py-3 px-6 text-left">Limit (€)</th>
            <th class="py-3 px-6 text-left">Spent (€)</th>
            <th class="py-3 px-6 text-left">Remaining (€)</th>
            <th class="py-3 px-6 text-left">Usage (%)</th>
            <th class="py-3 px-6 text-left">Progress</th>
        </tr>
    </thead>
    <tbody class="text-gray-700 text-sm divide-y divide-gray-300">
        {% for budget in budgets %}
        <tr>
            <td class="py-4 px-6">{{ budget.category }}</td>
            <td class="py-4 px-6">{{ budget.limit }}</td>
            <td class="py-4 px-6">{{ budget.total_spent }}</td>
            <td class="py-4 px-6">{{ budget.remaining }}</td>
            <td class="py-4 px-6">{{ budget.percent_used }}%</td>
            <td class="py-4 px-6">
                <div class="w-full bg-gray-200 rounded-full h-3">
                  <div class="h-3 rounded-full
                      {% if budget.percent_used < 75 %} bg-green-500
                      {% elif budget.percent_used < 100 %} bg-yellow-500
                      {% else %} bg-red-500 {% endif %}"
                      style="width: {{ budget.percent_used }}%;">
                  </div>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}

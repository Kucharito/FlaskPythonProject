{% extends "base.html" %}

{% block title %}Expenses Dashboard{% endblock %}

{% block content %}

<h2>Expenses Dashboard</h2>

<form method="GET" action="{{ url_for('expenses.list_expenses')}}">
    <input type="text" name="category" placeholder="Filter by category" value="{{ category_filter or '' }}">
    <button type="submit">Filter</button>
</form>

{% if category_filter %}
    <p>Showing results for category: "<strong>{{ category_filter }}</strong>"
    <a href="{{ url_for('expenses.list_expenses') }}">(Clear filter)</a></p>
{% endif %}


{% if expenses %}
    <ul>
        {% for expense in expenses %}
            <li>
            {{ expense.category }} - ${{ expense.amount }} on {{ expense.date }}
            <form action="{{ url_for('expenses.delete_expense', expense_id=expense.id) }}" method="POST" style="display:inline;">
                {{ form.hidden_tag() if form else '' }}
                <button type="submit" onclick="return confirm('Are you sure you want to delete this expense?');">Delete</button>
                <a href="{{ url_for('expenses.edit_expense', expense_id=expense.id) }}">Edit</a>
            </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>No expenses yet. Add to list</p>
{% endif %}

<a href="{{ url_for('expenses.add_expenses') }}">Add New Expense</a>

{% endblock %}
